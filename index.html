<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>2015 Taxable Income Slidebar</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <script src="scripts/jquery-2.1.4.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="col-md-8 col-md-offset-2">
            <h1 class="text-center">2015 Tax <del>Table</del> Slider</h1>
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <span id="notice">
                    This number represents your taxable income, move the slider to see how changes
                    in taxable income effect the taxes owed for 2015.
                </span>
            </div>

            <div class="content">
                <p class="text-center">
                    <span class="giant total-taxable"></span>
                </p>
                <input type="range" min="0" max="1000000" step="250" value="50000">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th class="col-xs-4">Amount</th>
                            <th class="col-xs-4">Effective Tax Rate</th>
                            <th class="col-xs-4">Total Tax Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong><span class="total-taxable"></span></strong></td>
                            <td><strong><span id="total-tax-rate"></span></strong></td>
                            <td><strong><span id="total-tax-amount"></span></strong></td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th class="col-xs-4">Effected Amount</th>
                            <th class="col-xs-4">Tax Rate on Amount</th>
                            <th class="col-xs-4">Total Tax Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>$0 - $9,225</td>
                            <td>10.0%</td>
                            <td><span id="ten-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$9,226 - $37,450</td>
                            <td>15.0%</td>
                            <td><span id="fifteen-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$37,451 - $90,750</td>
                            <td>25.0%</td>
                            <td><span id="twentyfive-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$90,751 - $189,300</td>
                            <td>28.0%</td>
                            <td><span id="twentyeight-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$189,301 - $411,500</td>
                            <td>33.0%</td>
                            <td><span id="thirtythree-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$411,501 - $413,200</td>
                            <td>35.0%</td>
                            <td><span id="thirtyfive-amount"></span></td>
                        </tr>
                        <tr>
                            <td>$413,201+</td>
                            <td>39.6%</td>
                            <td><span id="thirtynine-amount"></span></td>
                        </tr>
                    </tbody>
                </table>
                <a href="http://www.forbes.com/sites/kellyphillipserb/2015/05/14/2015-tax-rates-standard-deductions-personal-exemptions-credit-amounts-more/">data</a>
            </div>

        </div>
    </div>

    <script>
        $(document).ready(updateTables);

        // Returns string of a number with commans and a dollar sign.
        function dollarize(num) {
            num = Math.round(num * 100) / 100;
            num = num.toFixed(2);
            return '$' + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Returns string of a number formated to be a percent.
        function percentagize(num) {
            if(isNaN(num)) { num = 0; }
            num = Math.round(num * 1000) / 10;
            return num.toString() + '%';
        }

        function updateTables() {
            // Value from slider.
            var taxableAmount = parseInt($('input').val(), 10);

            // Caluclate tax amounts.
            var tenPercent = 0;
            var fifteenPercent = 0;
            var twentyfivePercent = 0;
            var twentyeightPercent = 0;
            var thirtythreePercent = 0;
            var thirtyfivePercent = 0;
            var thirtyninePercent = 0;

            if(taxableAmount <= 9225) {
                tenPercent = taxableAmount * 0.10;
            } else if(taxableAmount <= 37450) {
                tenPercent = 922.50;
                fifteenPercent = (taxableAmount - 9225) * 0.15;
            } else if(taxableAmount <= 90750) {
                tenPercent = 922.50;
                fifteenPercent = 4233.50;
                twentyfivePercent = (taxableAmount - 37450) * 0.25;
            } else if(taxableAmount <= 189300) {
                tenPercent = 922.50;
                fifteenPercent = 4233.50;
                twentyfivePercent = 13325.00;
                twentyeightPercent = (taxableAmount - 90750) * 0.28;
            } else if(taxableAmount <= 411500) {
                tenPercent = 922.50;
                fifteenPercent = 4233.50;
                twentyfivePercent = 13325.00;
                twentyeightPercent = 27593.72;
                thirtythreePercent = (taxableAmount - 189300) * 0.33;
            } else if(taxableAmount <= 413200) {
                tenPercent = 922.50;
                fifteenPercent = 4233.50;
                twentyfivePercent = 13325.00;
                twentyeightPercent = 27593.72;
                thirtythreePercent = 73325.67;
                thirtyfivePercent = (taxableAmount - 411500) * 0.35;
            } else {
                tenPercent = 922.50;
                fifteenPercent = 4233.50;
                twentyfivePercent = 13325.00;
                twentyeightPercent = 27593.72;
                thirtythreePercent = 73325.67;
                thirtyfivePercent = 594.65;
                thirtyninePercent = (taxableAmount - 413200) * 0.396;
            }

            // Calculate effective tax rate.
            var totalTaxAmount = tenPercent + fifteenPercent + twentyfivePercent +
                twentyeightPercent + thirtythreePercent + thirtyfivePercent + thirtyninePercent;
            var effectiveTaxRate = totalTaxAmount / taxableAmount;

            // Update display tables.
            $('.total-taxable').html(dollarize(taxableAmount));
            $('#total-tax-rate').html(percentagize(effectiveTaxRate));
            $('#total-tax-amount').html(dollarize(totalTaxAmount));

            $('#ten-amount').html(dollarize(tenPercent));
            $('#fifteen-amount').html(dollarize(fifteenPercent));
            $('#twentyfive-amount').html(dollarize(twentyfivePercent));
            $('#twentyeight-amount').html(dollarize(twentyeightPercent));
            $('#thirtythree-amount').html(dollarize(thirtythreePercent));
            $('#thirtyfive-amount').html(dollarize(thirtyfivePercent));
            $('#thirtynine-amount').html(dollarize(thirtyninePercent));






        }


        $('input').on('input change', updateTables);

    </script>

<body>
</html>
