<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>2015 Taxable Income Slidebar</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <script src="scripts/jquery-2.1.4.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="col-md-8 col-md-offset-2">
            <h1 class="text-center">2015 Tax <del>Table</del> Slider</h1>
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <span id="notice">
                    This number represents your taxable income, move the slider to see how changes
                    in taxable income effect the taxes owed for 2015. <strong>Only for filing as
                    single.</strong>
                </span>
            </div>

            <div class="content">
                <p class="text-center">
                    <span class="giant total-taxable"></span>
                </p>
                <input type="range" min="0" max="1000000" step="250" value="50000">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th class="col-xs-4">Taxable Income</th>
                            <th class="col-xs-4">Effective Tax Rate</th>
                            <th class="col-xs-4">Total Tax</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong><span class="total-taxable"></span></strong></td>
                            <td><strong><span id="total-tax-rate"></span></strong></td>
                            <td><strong><span id="total-tax-amount"></span></strong></td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th class="col-xs-4">Effected Amount</th>
                            <th class="col-xs-4">Tax Rate on Portion</th>
                            <th class="col-xs-4">Tax on this Portion</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="ten-amount"></span></td>
                            <td>10.0%</td>
                            <td><span id="ten-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="fifteen-amount"></span></td>
                            <td>15.0%</td>
                            <td><span id="fifteen-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="twentyfive-amount"></span></td>
                            <td>25.0%</td>
                            <td><span id="twentyfive-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="twentyeight-amount"></span></td>
                            <td>28.0%</td>
                            <td><span id="twentyeight-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="thirtythree-amount"></span></td>
                            <td>33.0%</td>
                            <td><span id="thirtythree-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="thirtyfive-amount"></span></td>
                            <td>35.0%</td>
                            <td><span id="thirtyfive-tax"></span></td>
                        </tr>
                        <tr>
                            <td><span id="thirtynine-amount"></span></td>
                            <td>39.6%</td>
                            <td><span id="thirtynine-tax"></span></td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    Use some common sense: This was written by a nerd with a Forbes artical and
                    should not be taken as tax advice.
                </p>
                <div class="well well-sm pull-right">
                    <a href="http://www.forbes.com/sites/kellyphillipserb/2015/05/14/2015-tax-rates-standard-deductions-personal-exemptions-credit-amounts-more/">
                        Data
                    </a> |
                    <a href="https://github.com/deplicator/tax-slider">
                        Source
                    </a> |
                    <a href="http://deplicator.github.io/blog/tax-sliding">
                        Why
                    </a> |
                    <a href="mailto:james@geekwagon.net?subject=Why did you waste your time with this silly tax thing?">
                        Questions
                    </a>
                </div>

            </div>

        </div>
    </div>

    <script>
        $(document).ready(updateTables);

        // Returns string of a number with commans and a dollar sign.
        function dollarize(num) {
            num = Math.round(num * 100) / 100;
            num = num.toFixed(2);
            return '$' + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Returns string of a number formated to be a percent.
        function percentagize(num) {
            if(isNaN(num)) { num = 0; }
            num = Math.round(num * 10000) / 100;
            return num.toString() + '%';
        }

        function updateTables() {
            // Value from slider.
            var taxableAmount = parseInt($('input').val(), 10);

            // Amounts to tax for each percent range.
            var tenAmount = 0;
            var fifteenAmount = 0;
            var twentyfiveAmount = 0;
            var twentyeightAmount = 0;
            var thirtythreeAmount = 0;
            var thirtyfiveAmount = 0;
            var thirtynineAmount = 0;

            // Caluclate tax amounts.
            var tenTax = 0;
            var fifteenTax = 0;
            var twentyfiveTax = 0;
            var twentyeightTax = 0;
            var thirtythreeTax = 0;
            var thirtyfiveTax = 0;
            var thirtynineTax = 0;

            if(taxableAmount <= 9225) {
                tenAmount = taxableAmount;
                tenTax = tenAmount * 0.10;
            } else if(taxableAmount <= 37450) {
                tenAmount = 9225;
                fifteenAmount = taxableAmount - 9225;
                tenTax = 922.50;
                fifteenTax = fifteenAmount * 0.15;
            } else if(taxableAmount <= 90750) {
                tenAmount = 9225;
                fifteenAmount = 28224;
                twentyfiveAmount = taxableAmount - 37450;
                tenTax = 922.50;
                fifteenTax = 4233.50;
                twentyfiveTax = twentyfiveAmount * 0.25;

            } else if(taxableAmount <= 189300) {
                tenAmount = 9225;
                fifteenAmount = 28224;
                twentyfiveAmount = 53299;
                twentyeightAmount = taxableAmount - 90750;
                tenTax = 922.50;
                fifteenTax = 4233.50;
                twentyfiveTax = 13325.00;
                twentyeightTax = twentyeightAmount * 0.28;

            } else if(taxableAmount <= 411500) {
                tenAmount = 9225;
                fifteenAmount = 28224;
                twentyfiveAmount = 53299;
                twentyeightAmount = 98549;
                thirtythreeAmount = taxableAmount - 189300;
                tenTax = 922.50;
                fifteenTax = 4233.50;
                twentyfiveTax = 13325.00;
                twentyeightTax = 27593.72;
                thirtythreeTax = thirtythreeAmount * 0.33;

            } else if(taxableAmount <= 413200) {
                tenAmount = 9225;
                fifteenAmount = 28224;
                twentyfiveAmount = 53299;
                twentyeightAmount = 98549;
                thirtythreeAmount = 222199;
                thirtyfiveAmount = taxableAmount - 411500;
                tenTax = 922.50;
                fifteenTax = 4233.50;
                twentyfiveTax = 13325.00;
                twentyeightTax = 27593.72;
                thirtythreeTax = 73325.67;
                thirtyfiveTax = thirtyfiveAmount * 0.35;

            } else {
                tenAmount = 9225;           //  $9,225 -       $0
                fifteenAmount = 28224;      // $37,450 -   $9,226
                twentyfiveAmount = 53299;   // $90,750 -  $37,451
                twentyeightAmount = 98549;  //$189,300 -  $90,751
                thirtythreeAmount = 222199; //$411,500 - $189,301
                thirtyfiveAmount = 1699;    //$413,200 - $411,501
                thirtynineAmount = taxableAmount - 413200;

                tenTax = 922.50;
                fifteenTax = 4233.50;
                twentyfiveTax = 13325.00;
                twentyeightTax = 27593.72;
                thirtythreeTax = 73325.67;
                thirtyfiveTax = 594.65;
                thirtynineTax = thirtynineAmount * 0.396;
            }

            // Calculate effective tax rate.
            var totalTaxAmount = tenTax + fifteenTax + twentyfiveTax +
                twentyeightTax + thirtythreeTax + thirtyfiveTax + thirtynineTax;
            var effectiveTaxRate = totalTaxAmount / taxableAmount;

            // Update display tables.
            $('.total-taxable').html(dollarize(taxableAmount));
            $('#total-tax-rate').html(percentagize(effectiveTaxRate));
            $('#total-tax-amount').html(dollarize(totalTaxAmount));

            $('#ten-amount').html(dollarize(tenAmount));
            $('#ten-tax').html(dollarize(tenTax));

            $('#fifteen-amount').html(dollarize(fifteenAmount));
            $('#fifteen-tax').html(dollarize(fifteenTax));

            $('#twentyfive-amount').html(dollarize(twentyfiveAmount));
            $('#twentyfive-tax').html(dollarize(twentyfiveTax));

            $('#twentyeight-amount').html(dollarize(twentyeightAmount));
            $('#twentyeight-tax').html(dollarize(twentyeightTax));

            $('#thirtythree-amount').html(dollarize(thirtythreeAmount));
            $('#thirtythree-tax').html(dollarize(thirtythreeTax));

            $('#thirtyfive-amount').html(dollarize(thirtyfiveAmount));
            $('#thirtyfive-tax').html(dollarize(thirtyfiveTax));

            $('#thirtynine-amount').html(dollarize(thirtynineAmount));
            $('#thirtynine-tax').html(dollarize(thirtynineTax));

        }


        $('input').on('input change', updateTables);

    </script>

<body>
</html>
